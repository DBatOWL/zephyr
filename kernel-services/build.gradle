buildscript {
    [
            "configurations",
            "tasks"
    ].each {
        apply from: "${project.rootDir}/tasks/${it}.gradle"
    }

}


plugins {
    id 'war'
    id 'java'
}


repositories {
    ivy {
        patternLayout {
            url 'http://apache.cs.utah.edu/karaf/'
            artifact '[revision]/[module]-[revision].[ext]'
        }
    }
}


dependencies {



    [
            "jupiter-api",
            "jupiter-engine"
    ].each {
        testImplementation "org.junit.jupiter:junit-$it"
    }

    [
            'exam',
            'exam-inject',
            'exam-container-karaf',
    ].each {
        testImplementation "org.ops4j.pax.exam:pax-$it"
    }


    /**
     * Kernel dependencies
     */
    kernel 'apache-karaf:apache-karaf@zip'

    [
            'feature-jaxrs'
    ].each {
        feature "${project.group}:${it}:${project.version}@kar"
    }
    

    /**
     * Compile-only dependencies
     */
    [
            'org.osgi:org.osgi.core',
            'javax.inject:javax.inject',
            'javax.ws.rs:javax.ws.rs-api',
            'org.springframework:spring-web',
            'javax.servlet:javax.servlet-api',
            'org.springframework:spring-context',
            'javax.annotation:javax.annotation-api',
            'org.apache.felix:org.apache.felix.ipojo',
            'org.apache.felix:org.apache.felix.ipojo.annotations',
            'org.osgi:org.osgi.service.component.annotations'
    ].each { dependency ->
        compileOnly dependency
    }
}
